### 直接回答

- 根轨迹分析是研究LTI系统闭环极点随增益变化的图形方法，主要用于分析稳定性。
- 它帮助设计控制器，调整系统性能，如阻尼比和自然频率。
- 通过实例可以直观理解极点移动和系统行为。

#### 什么是根轨迹分析？
根轨迹分析是一种在控制系统工程中使用的工具，展示LTI（线性时不变）系统的闭环极点如何随着某个参数（如增益 \(K\)）的变化而在复平面（s平面）中移动。它主要用于判断系统的稳定性，并帮助设计控制器以达到期望的动态性能，比如快速响应或减少振荡。

#### 它是如何工作的？
通过绘制根轨迹图，我们可以：
- 找到系统在不同增益下的极点位置。
- 判断系统是否稳定（极点是否在左半平面）。
- 选择合适的增益，使系统达到所需的阻尼比和自然频率。

#### 一个简单实例
考虑系统 \(G(s)H(s) = \frac{K}{s(s+1)(s+3)}\)：
- 当 \(K = 0\) 时，极点在 \(s = 0, -1, -3\)。
- 随着 \(K\) 增加，极点开始移动，根轨迹显示它们如何趋向渐近线。
- 在 \(K = 12\) 时，根轨迹触及虚轴，系统可能变得不稳定。

通过这种方式，我们可以直观地看到增益变化对系统稳定性的影响。

---

### 详细报告

#### 引言
LTI（Linear Time-Invariant）系统的根轨迹分析是一种经典的控制系统分析方法，广泛应用于工程领域。它通过图形化方式展示系统的闭环极点随参数变化的轨迹，帮助工程师分析系统的稳定性并设计控制器。本报告将详细解释根轨迹分析的定义、目的、构造步骤，并通过实例展示其应用。

#### 根轨迹分析的理论基础
根轨迹分析的核心是研究闭环传递函数的极点位置如何随系统参数（如增益 \(K\)）的变化而移动。闭环传递函数通常由开环传递函数 \(G(s)H(s)\) 和反馈增益组成，其特征方程为 \(1 + G(s)H(s) = 0\)。根轨迹满足以下条件：
- **角度条件**：\(\angle G(s)H(s) = 180^\circ\)（或 \(\pi\) 弧度）。
- **幅度条件**：\(|G(s)H(s)| = 1\)。

其主要目的是：
- 确定系统的稳定性：如果所有闭环极点位于左半复平面，系统是稳定的。
- 设计控制器：通过调整增益 \(K\)，使极点位于期望位置，优化系统的动态性能，如阻尼比 \(\zeta\) 和自然频率 \(\omega_n\)。

#### 根轨迹的构造步骤
以下是构造根轨迹的详细步骤，基于 [Construction of Root Locus | GeeksforGeeks](https://www.geeksforgeeks.org/construction-of-root-locus/)：

| 步骤编号 | 描述                                                                 |
|----------|----------------------------------------------------------------------|
| 1        | 写出特征方程 \(1 + G(s)H(s) = 0\)，找到开环极点和零点，在s平面中标注。根轨迹从极点开始（\(K=0\)），到零点或无穷远结束（\(K=\infty\)）。 |
| 2        | 确定分支数 \(N\)：若极点数 \(P >\) 零点数 \(Z\)，则 \(N = P\)；若 \(P < Z\)，则 \(N = Z\)；若 \(P = Z\)，则 \(N = P = Z\)。 |
| 3        | 确定实轴上的根轨迹：若点右侧的极点和零点总数为奇数，则该段实轴上存在根轨迹。 |
| 4        | 找到分离点和汇合点：通过求解 \(\frac{dK}{ds} = 0\)，其中 \(K = -1/G(s)H(s)\) 的导数为零。 |
| 5        | 找到质心（渐近线交点）：计算公式为 \(x = (\sum \text{极点实部} - \sum \text{零点实部}) / (P - Z)\)）。 |
| 6        | 找到渐近线角度：\(\theta = \frac{(2m+1)180^\circ}{P-Z}\)，其中 \(m = 0, 1, 2, \ldots, P-Z-1\)。 |
| 7        | 找到与虚轴的交点：使用鲁棒性准则（如Routh-Hurwitz准则）或直接求解。 |
| 8        | 计算离开角（对于复数极点）：\(\phi_d = 180^\circ - (\phi_p - \phi_z)\)。 |
| 9        | 计算到达角（对于复数零点）：\(\phi_a = 180^\circ + (\phi_p - \phi_z)\)。 |

#### 实例分析
以下通过两个实例详细讲解根轨迹分析的过程。

##### 实例1：\(G(s)H(s) = \frac{K}{s(s+1)(s+3)}\)
- **步骤1：极点和零点**
  - 极点：\(s = 0, -1, -3\)（3个极点）。
  - 零点：无。
- **步骤2：分支数**
  - 分支数 \(N = P = 3\)。
- **步骤3：实轴上的根轨迹**
  - 检查实轴各段：
    - \((-\infty, -3)\)：右侧3个极点（奇数），存在根轨迹。
    - \((-3, -1)\)：右侧2个极点（偶数），不存在。
    - \((-1, 0)\)：右侧1个极点（奇数），存在。
    - \((0, +\infty)\)：右侧0个（偶数），不存在。
  - 因此，根轨迹存在于 \((-\infty, -3)\) 和 \((-1, 0)\)。
- **步骤4：分离点**
  - 特征方程：\(K = -s(s+1)(s+3)\)。
  - 求 \(\frac{dK}{ds} = 0\)，解得 \(s = -0.45, -2.21\)，取 \(s = -0.45\)（忽略虚数解）。
- **步骤5：质心**
  - 质心 \(x = \frac{0 + (-1) + (-3)}{3-0} = -1.33\)。
- **步骤6：渐近线角度**
  - \(\theta = \frac{(2m+1)180^\circ}{3}\)，\(m = 0, 1, 2\)：
    - \(m=0\)：\(60^\circ\)。
    - \(m=1\)：\(180^\circ\)。
    - \(m=2\)：\(300^\circ\)。
- **步骤7：虚轴交点**
  - 计算得 \(K = 12\) 时，交点为 \(s = \pm 1.73j\)。

通过以上步骤，可以绘制根轨迹图，显示极点从 \(K=0\) 的位置开始，随着 \(K\) 增加移动，最终趋向渐近线。

##### 实例2：比较两个系统
考虑系统 \(G_1(s) = \frac{1}{s(s+1)(s+3)}\) 和 \(G_2(s) = \frac{1}{s(s+1)(s+3)(s+12)}\)，当增益 \(K = 40\) 时：
- 两个系统的闭环特征方程相同：\(s^3 + 6s^2 + 45s + 40 = 0\)。
- 闭环极点：\(s = -1, -2.5 \pm j5.8\)。

尽管特征方程相同，但它们的根轨迹不同：
- \(G_1(s)\) 的根轨迹较简单，无额外零点影响。
- \(G_2(s)\) 受零点 \(s = -12\) 影响，系统响应更复杂。

系统行为：
- \(T_1(s)\)（基于 \(G_1(s)\)）：类似于一阶系统，settling time 约4秒，无超调。
- \(T_2(s)\)（基于 \(G_2(s)\)）：更像二阶系统，响应更快，有振荡（阻尼比 \(\zeta = 0.4\)，自然频率 \(\omega_n = 6.3\) rad/s）。

这一实例强调，根轨迹分析关注极点，但零点对系统响应同样重要，设计时需综合考虑。

#### 根轨迹分析的应用与局限
根轨迹分析在以下方面有重要应用：
- 稳定性分析：通过观察根轨迹是否进入右半平面判断系统稳定性。
- 控制器设计：设计PI、PD、PID等控制器，调整系统性能。
- 教育价值：帮助学生理解控制系统理论。

然而，它也有局限：
- 假设系统为二阶近似，可能不适用于高阶复杂系统。
- 需要验证最终设计，通过仿真检查是否满足目标。

#### 结论
根轨迹分析是LTI系统分析和设计的重要工具，通过图形化方法直观展示系统动态行为。实例分析表明，它不仅能帮助确定稳定性，还能指导控制器设计，但需注意零点的影响和系统复杂性。

#### 关键引用
- [Root locus analysis definition and purpose](https://en.wikipedia.org/wiki/Root_locus_analysis)
- [Construction of Root Locus with examples](https://www.geeksforgeeks.org/construction-of-root-locus/)
- [Root Locus practical examples and pitfalls](https://lpsa.swarthmore.edu/Root_Locus/RLocusExamples.html)
# 怎么给实际轴分段？ 
当开环传递函数 \( G(s)H(s) \) 既有极点又有零点时，确定实轴上的根轨迹分段需要根据极点和零点的分布，结合根轨迹的角度条件进行分析。以下是详细的步骤和规则，辅以实例说明。

### 直接回答
实轴上的根轨迹分段规则：
- 对于实轴上的任意点 \( s \)，计算该点右侧的开环极点和零点的总数（实数部分大于 \( s \) 的极点和零点）。
- 如果总数为奇数，则该点属于根轨迹；如果为偶数，则不属于。
- 零点和极点的影响相反：极点贡献 \( +180^\circ \)，零点贡献 \( -180^\circ \)。角度条件要求总角度为 \( (2k+1)180^\circ \)，因此奇数个极点/零点满足条件。

### 详细分析与步骤
根轨迹的绘制基于特征方程 \( 1 + K G(s)H(s) = 0 \)，即 \( G(s)H(s) = -1 \)。角度条件要求 \( \angle G(s)H(s) = (2k+1)180^\circ \)。对于实轴上的点，极点和零点的角度贡献如下：
- 实轴上的极点：若测试点 \( s \) 在极点右侧，角度为 \( 180^\circ \)，左侧为 \( 0^\circ \)。
- 实轴上的零点：若测试点 \( s \) 在零点右侧，角度为 \( -180^\circ \)，左侧为 \( 0^\circ \)。

#### 步骤：
1. **确定极点和零点**：
   - 列出开环传递函数 \( G(s)H(s) \) 的所有极点和零点。
   - 标记这些极点和零点在实轴上的位置。
2. **划分实轴**：
   - 以极点和零点的位置为界，将实轴分成若干段。
   - 例如，若极点在 \( s = -3, -1 \)，零点在 \( s = -2 \)，则实轴分段为：\((-\infty, -3), (-3, -2), (-2, -1), (-1, +\infty)\)。
3. **检查每段是否在根轨迹上**：
   - 对于每段，选择一个测试点 \( s \)。
   - 计算该点右侧的极点数 \( P_r \) 和零点数 \( Z_r \)。
   - 总和 \( N = P_r + Z_r \)。若 \( N \) 为奇数，该段在根轨迹上；若为偶数，则不在。
4. **验证角度条件**：
   - 每个右侧极点贡献 \( +180^\circ \)，每个右侧零点贡献 \( -180^\circ \)。
   - 总角度为 \( (P_r - Z_r) \cdot 180^\circ \)。若结果为 \( (2k+1)180^\circ \)，则该段在根轨迹上。

#### 实例讲解
考虑开环传递函数 \( G(s)H(s) = \frac{K(s+2)}{s(s+1)(s+3)} \)：
- **极点**：\( s = 0, -1, -3 \)（3 个极点）。
- **零点**：\( s = -2 \)（1 个零点）。
- **分支数**：分支数 \( N = \max(P, Z) = 3 \)。

##### 步骤1：划分实轴
极点和零点在实轴上的位置为 \( s = -3, -2, -1, 0 \)。实轴分段：
- \((-\infty, -3)\)
- \((-3, -2)\)
- \((-2, -1)\)
- \((-1, 0)\)
- \((0, +\infty)\)

##### 步骤2：检查每段
对于每段，选择一个测试点，计算右侧的极点数 \( P_r \) 和零点数 \( Z_r \)，并判断 \( P_r + Z_r \) 是否为奇数。

| 段            | 测试点 | 右侧极点 (\( s > \text{测试点} \)) | 右侧零点 | \( P_r + Z_r \) | 是否在根轨迹上 |
|---------------|--------|------------------------------------|----------|-----------------|----------------|
| \((-\infty, -3)\) | -4     | \( s = -3, -1, 0 \) (3 个)        | \( s = -2 \) (1 个) | 3 + 1 = 4       | 偶数，不在      |
| \((-3, -2)\)     | -2.5   | \( s = -1, 0 \) (2 个)            | \( s = -2 \) (1 个) | 2 + 1 = 3       | 奇数，在        |
| \((-2, -1)\)     | -1.5   | \( s = -1, 0 \) (2 个)            | 无       | 2 + 0 = 2       | 偶数，不在      |
| \((-1, 0)\)      | -0.5   | \( s = 0 \) (1 个)                | 无       | 1 + 0 = 1       | 奇数，在        |
| \((0, +\infty)\) | 1      | 无                                 | 无       | 0 + 0 = 0       | 偶数，不在      |

##### 步骤3：验证角度条件
以段 \((-3, -2)\)（测试点 \( s = -2.5 \)）为例：
- 右侧极点 \( s = -1, 0 \)：每个贡献 \( +180^\circ \)，共 \( 2 \times 180^\circ = 360^\circ \)。
- 右侧零点 \( s = -2 \)：贡献 \( -180^\circ \)。
- 总角度：\( 360^\circ - 180^\circ = 180^\circ \)，满足 \( (2k+1)180^\circ \)（取 \( k = 0 \)），确认该段在根轨迹上。

##### 结果
根轨迹存在于实轴段：
- \((-3, -2)\)
- \((-1, 0)\)

#### MATLAB 验证
以下是 MATLAB 代码，用于绘制 \( G(s)H(s) = \frac{K(s+2)}{s(s+1)(s+3)} \) 的根轨迹，验证实轴分段结果：

```matlab
% MATLAB script to plot the root locus for G(s)H(s) = K(s+2)/(s(s+1)(s+3))

% Clear workspace and command window
clear all;
clc;

% Define the transfer function
% Numerator: s+2
% Denominator: s(s+1)(s+3) = s^3 + 4s^2 + 3s
num = [1 2];           % Numerator coefficients (s+2)
den = [1 4 3 0];       % Denominator coefficients (s^3 + 4s^2 + 3s)

% Create transfer function
sys = tf(num, den);

% Plot root locus
figure;
rlocus(sys);            % Plot the root locus
grid on;                % Add grid for better readability
title('Root Locus of G(s)H(s) = K(s+2)/(s(s+1)(s+3))');
xlabel('Real Axis');
ylabel('Imaginary Axis');

% Optional: Set axis limits for better visualization
axis([-5 1 -3 3]);
```

### 运行结果说明
- 运行后，根轨迹图将显示：
  - 极点 \( s = 0, -1, -3 \) 为起点（标记为“×”）。
  - 零点 \( s = -2 \) 为终点（标记为“○”）。
  - 实轴上的轨迹出现在 \((-3, -2)\) 和 \((-1, 0)\)，与手动计算一致。
- 零点 \( s = -2 \) 吸引了一条分支，其他分支趋向无穷远，渐近线由质心和角度决定。

### 注意事项
- **零点的影响**：零点会吸引根轨迹分支，改变轨迹形状，需特别注意零点位置。
- **复杂系统**：若有复数极点或零点，实轴分段仅考虑实轴上的极点和零点，复数部分影响其他轨迹形状。
- **验证工具**：MATLAB 的 `rlocus` 自动计算并绘制根轨迹，可用于验证手动计算结果。

通过上述步骤和实例，你可以准确判断实轴上的根轨迹分段，并通过 MATLAB 直观验证结果。
break point也可以通过\(\frac{\partial G}{\partial s}\)计算。 